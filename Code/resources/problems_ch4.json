[
  {
    "name": "p4_1_a_sum_even_numbers",
    "nat_lang_statement": "Write a method with loops that computes the sum of all even numbers between 2 and 100 (inclusive).",
    "dafny": {
      "method_signature": "p4_1_a_sum_even_numbers() returns (sum: int)",
      "requires": [],
      "ensures": [
        "sum == 2550"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_1_b_sum_squares",
    "nat_lang_statement": "Write a method with loops that computes the sum of all squares between 1 and 100 (inclusive).",
    "dafny": {
      "method_signature": "p4_1_b_sum_squares() returns (sum: int)",
      "requires": [],
      "ensures": [
        "sum == 338350"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_1_c_powers_of_two",
    "nat_lang_statement": "Write a method with loops that computes all powers of 2 from 2^0 up to 2^20.",
    "dafny": {
      "method_signature": "p4_1_c_powers_of_two() returns (powers: seq<int>)",
      "requires": [],
      "ensures": [
        "|powers| == 21",
        "forall i :: 0 <= i < |powers| ==> powers[i] == pow(2, i)"
      ],
      "functional_code": "function pow(base: int, exp: int): int\n  requires  0 <= exp\n  decreases exp\n{\n  if exp == 0 then 1 else base * pow(base, exp - 1)\n}"
    }
  },
  {
    "name": "p4_1_d_sum_odd_numbers",
    "nat_lang_statement": "Write a method with loops that computes the sum of all odd numbers between a and b (inclusive), where a and b are inputs.",
    "dafny": {
      "method_signature": "p4_1_d_sum_odd_numbers(a: int, b: int) returns (sum: int)",
      "requires": [],
      "ensures": [
        "sum == sum_odd(a, b)"
      ],
      "functional_code": "function sum_odd(a: int, b: int): int\ndecreases b - a\n{\n  if a > b then 0\n  else if a % 2 == 1 then a + sum_odd(a + 1, b)\n  else sum_odd(a + 1, b)\n}"
    }
  },
  {
    "name": "p4_1_e_sum_odd_digits",
    "nat_lang_statement": "Write a method with loops that computes the sum of all odd digits of an input. (For example, if the input is 32677, the sum would be 3 + 7 + 7 = 17.)",
    "dafny": {
      "method_signature": "p4_1_e_sum_odd_digits(a: int) returns (sum: int)",
      "requires": [
        "a >= 0"
      ],
      "ensures": [
        "ensures sum >= 0",
        "sum == s_o_d(n)"
      ],
      "functional_code": "function s_o_d(a: int): int\\nrequires a >= 0\\n{\\n  if a == 0 then 0\\n  else if a % 2 == 0 then s_o_d(a / 10)\\n  else a % 10 + s_o_d(a / 10)\\n}"
    }
  },
  {
    "name": "p4_2_a_min_max",
    "nat_lang_statement": "Write a method that takes a sequence of integers and returns the smallest and largest of the inputs.",
    "dafny": {
      "method_signature": "p4_2_a_min_max(inputs: seq<int>) returns (min: int, max: int)",
      "requires": [
        "0 < |inputs|"
      ],
      "ensures": [
        "forall x :: x in inputs ==> min <= x",
        "forall x :: x in inputs ==> max >= x",
        "exists x :: x in inputs && min == x",
        "exists x :: x in inputs && max == x"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_2_b_count_even_odd",
    "nat_lang_statement": "Write a method that takes a sequence of integers and returns the number of even and odd inputs.",
    "dafny": {
      "method_signature": "p4_2_b_count_even_odd(inputs: seq<int>) returns (even_count: int, odd_count: int)",
      "requires": [],
      "ensures": [
        "even_count == number_even(inputs)",
        "odd_count == number_odd(inputs)"
      ],
      "functional_code": "function number_odd(s:seq<int>): int\n{ if s == [] then 0\n  else if s[0] % 2 == 1 then 1 + number_odd(s[1..])\n  else number_odd(s[1..])\n}\n\nfunction number_even (s:seq<int>): int\n{ if s == [] then 0\n  else if s[0] % 2 == 0 then 1 + number_even(s[1..])\n  else number_even(s[1..])\n}"
    }
  },
  {
    "name": "p4_2_c_cumulative_totals",
    "nat_lang_statement": "Write a method that takes a sequence of integers and returns cumulative totals. For example, if the input is [1, 7, 2, 9], the method should return [1, 8, 10, 19].",
    "dafny": {
      "method_signature": "p4_2_c_cumulative_totals(inputs: seq<int>) returns (totals: seq<int>)",
      "requires": [
        "0 < |inputs|"
      ],
      "ensures": [
        "|totals| == |inputs|",
        "forall i :: 0 <= i < |inputs| ==> totals[i] == (if i == 0 then inputs[0] else totals[i - 1] + inputs[i])"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_2_d_adjacent_duplicates",
    "nat_lang_statement": "Write a method that takes a sequence of integers and returns all adjacent duplicates. For example, if the input is [1, 3, 3, 4, 5, 5, 6, 6, 6, 2], the method should return [3, 5, 6].",
    "dafny": {
      "method_signature": "p4_2_d_adjacent_duplicates(inputs: seq<int>) returns (duplicates: seq<int>)",
      "requires": [],
      "ensures": [
        "forall d :: d in duplicates ==> d in inputs",
        "forall i :: 0 <= i < |inputs| - 1 && inputs[i] == inputs[i + 1] ==> inputs[i] in duplicates",
        "forall d :: d in duplicates ==> exists i :: 0 <= i < |inputs| - 1 && inputs[i] == inputs[i + 1] && inputs[i] == d",
        "forall d :: d in duplicates ==> exists i, j :: 0 <= i < j < |inputs| && contiguous_duplicates(inputs, i, j, d) == true"
      ],
      "functional_code": "function contiguous_duplicates(inputs: seq<int>, i : int, j : int, d : int) : (b : bool) \n  requires 0 <= i < j < |inputs|\n  decreases j - i\n{\n  if i + 1 == j then inputs[i] == inputs[j] == d\n  else if inputs[i] == d then contiguous_duplicates(inputs, i + 1, j, d)\n  else false\n}"
    }
  },
  {
    "name": "p4_3_a_extract_uppercase",
    "nat_lang_statement": "Write a method that takes a string and returns only the uppercase letters in the string.",
    "dafny": {
      "method_signature": "p4_3_a_extract_uppercase(s: string) returns (uppercase: string)",
      "requires": [],
      "ensures": [
        "forall c :: c in uppercase ==> 'A' <= c <= 'Z'",
        "forall c :: c in s && 'A' <= c <= 'Z' ==> c in uppercase"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_3_b_every_second_letter",
    "nat_lang_statement": "Write a method that takes a string and returns every second letter of the string.",
    "dafny": {
      "method_signature": "p4_3_b_every_second_letter(s: string) returns (result: string)",
      "requires": [],
      "ensures": [
        "|result| * 2 == |s| || |result| * 2 + 1 == |s|",
        "forall i :: 0 <= i < |result| ==> result[i] == s[2 * i]"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_3_c_replace_vowels",
    "nat_lang_statement": "Write a method that takes a string and returns the string, with all vowels replaced by an underscore.",
    "dafny": {
      "method_signature": "p4_3_c_replace_vowels(s: string) returns (result: string)",
      "requires": [],
      "ensures": [
        "|result| == |s|",
        "forall i :: 0 <= i < |s| ==> (if s[i] in ['a','e','i','o','u','A','E','I','O','U'] then result[i] == '_' else result[i] == s[i])"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_3_d_count_vowels",
    "nat_lang_statement": "Write a method that takes a string and returns the number of vowels in the string.",
    "dafny": {
      "method_signature": "p4_3_d_count_vowels(s: string) returns (count: int)",
      "requires": [],
      "ensures": [
        "count >= 0",
        "forall c :: c in s && c in ['a','e','i','o','u','A','E','I','O','U'] ==> count >= 1",
        "(forall c :: c in s ==> c !in ['a','e','i','o','u','A','E','I','O','U']) ==> count == 0"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_3_e_positions_of_vowels",
    "nat_lang_statement": "Write a method that takes a string and returns the positions of all vowels in the string.",
    "dafny": {
      "method_signature": "p4_3_e_positions_of_vowels(s: string) returns (positions: seq<int>)",
      "requires": [],
      "ensures": [
        "forall p :: p in positions ==> 0 <= p < |s| && s[p] in ['a','e','i','o','u','A','E','I','O','U']",
        "forall i :: 0 <= i < |s| && s[i] in ['a','e','i','o','u','A','E','I','O','U'] ==> i in positions"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_4_month_with_highest_temperature",
    "nat_lang_statement": "Write a method that reads a sequence of twelve temperature values and returns the number of the month with the highest temperature.",
    "dafny": {
      "method_signature": "p4_5_month_with_highest_temperature(inputs: seq<real>) returns (hottest: int)",
      "requires": [
        "|inputs| == 12"
      ],
      "ensures": [
        "1 <= hottest <= 12",
        "forall i :: 0 <= i <= |inputs|-1 ==> inputs[hottest-1] >= inputs[i]"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_5_analyze_floats",
    "nat_lang_statement": "Write a method that takes a sequence of floatingpoint numbers and returns: - the average of the values. - the smallest of the values. - the largest of the values. - the range, that is the difference between the smallest and largest.",
    "dafny": {
      "method_signature": "p4_5_analyze_floats(values: seq<real>) returns (average: real, min: real, max: real, range: real)",
      "requires": [
        "0 < |values|"
      ],
      "ensures": [
        "average == (sum(values) / |values| as real)",
        "forall v :: v in values ==> min <= v",
        "forall v :: v in values ==> max >= v",
        "range == max - min",
        "exists v :: v in values && min == v",
        "exists v :: v in values && max == v"
      ],
      "functional_code": "function sum(values: seq<real>): real\n{\n  if |values| == 0 then 0.0\n  else values[0] + sum(values[1..])\n}"
    }
  },
  {
    "name": "p4_6_find_minimum",
    "nat_lang_statement": "Write a method that finds the minimum value from a list of inputs into a method.",
    "dafny": {
      "method_signature": "p4_6_find_minimum(inputs: seq<int>) returns (min: int)",
      "requires": [
        "0 < |inputs|"
      ],
      "ensures": [
        "forall x :: x in inputs ==> min <= x",
        "exists x :: x in inputs && min == x"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_7_permute_string",
    "nat_lang_statement": "Write a method that randomly permutes the characters in a string.",
    "dafny": {
      "method_signature": "p4_7_permute_string(s: string) returns (permuted: string)",
      "requires": [],
      "ensures": [
        "|permuted| == |s|",
        "forall c :: c in s ==> c in permuted",
        "forall c :: c in permuted ==> c in s"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_8_seperate_lines",
    "nat_lang_statement": "Write a method that reads a word and returns each character of the word on a separate line.",
    "dafny": {
      "method_signature": "p4_8_seperate_lines(s: string) returns (chars: string)",
      "requires": [],
      "ensures": [
        "|chars| == 2 * |s|",
        "forall i :: 0 <= i < |s| ==> i % 2 == 1 ==> chars[i] == '\\n'",
        "forall i :: 0 <= i < |s| ==> i % 2 == 0 ==> chars[i] == s[i / 2]"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_9_reverse_string",
    "nat_lang_statement": "Write a method that reads a word and returns the word in reverse.",
    "dafny": {
      "method_signature": "p4_9_reverse_string(s: string) returns (reversed: string)",
      "requires": [],
      "ensures": [
        "|reversed| == |s|",
        "forall i :: 0 <= i < |s| ==> reversed[i] == s[|s| - 1 - i]"
      ],
      "functional_code": null
    }
  },
  {
    "name": "p4_10_count_vowels",
    "nat_lang_statement": "Write a method that reads a word and returns the number of vowels in the word.",
    "dafny": {
      "method_signature": "p4_10_count_vowels(s: string) returns (count: int)",
      "requires": [],
      "ensures": [
        "0 <= count",
        "forall c :: c in s ==> c in ['a','e','i','o','u','A','E','I','O','U'] ==> count >= 1",
        "(forall c :: c in s ==> c !in ['a','e','i','o','u','A','E','I','O','U']) ==> count == 0"
      ],
      "functional_code": null
    }
  }
]
